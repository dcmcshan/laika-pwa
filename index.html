<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#00FFFF">
    <title>LAIKA Controller</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJiZyIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzIxOTZGMztzdG9wLW9wYWNpdHk6MSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzIxQ0JGMztzdG9wLW9wYWNpdHk6MSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMTkiIHJ5PSIxOSIgZmlsbD0idXJsKCNiZykiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0OCwgNDgpIj48ZWxsaXBzZSBjeD0iNDgiIGN5PSI3MiIgcng9IjM2IiByeT0iMjQiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjkiLz48Y2lyY2xlIGN4PSI0OCIgY3k9IjM2IiByPSIyMSIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuOSIvPjxlbGxpcHNlIGN4PSIzNiIgY3k9IjI0IiByeD0iNiIgcnk9IjEyIiBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC44Ii8+PGVsbGlwc2UgY3g9IjYwIiBjeT0iMjQiIHJ4PSI2IiByeT0iMTIiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiLz48Y2lyY2xlIGN4PSI0MiIgY3k9IjMzIiByPSIyIiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iNTQiIGN5PSIzMyIgcj0iMiIgZmlsbD0iIzMzMyIvPjxlbGxpcHNlIGN4PSI0OCIgY3k9IjM5IiByeD0iMyIgcnk9IjEuNSIgZmlsbD0iIzMzMyIvPjwvZz48L3N2Zz4=">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJiZyIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzIxOTZGMztzdG9wLW9wYWNpdHk6MSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzIxQ0JGMztzdG9wLW9wYWNpdHk6MSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMTkiIHJ5PSIxOSIgZmlsbD0idXJsKCNiZykiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0OCwgNDgpIj48ZWxsaXBzZSBjeD0iNDgiIGN5PSI3MiIgcng9IjM2IiByeT0iMjQiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjkiLz48Y2lyY2xlIGN4PSI0OCIgY3k9IjM2IiByPSIyMSIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuOSIvPjxlbGxpcHNlIGN4PSIzNiIgY3k9IjI0IiByeD0iNiIgcnk9IjEyIiBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC44Ii8+PGVsbGlwc2UgY3g9IjYwIiBjeT0iMjQiIHJ4PSI2IiByeT0iMTIiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiLz48Y2lyY2xlIGN4PSI0MiIgY3k9IjMzIiByPSIyIiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iNTQiIGN5PSIzMyIgcj0iMiIgZmlsbD0iIzMzMyIvPjxlbGxpcHNlIGN4PSI0OCIgY3k9IjM5IiByeD0iMyIgcnk9IjEuNSIgZmlsbD0iIzMzMyIvPjwvZz48L3N2Zz4=">
    
    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="LAIKA Controller">
    
    <!-- Mobile Optimizations -->
    <link href="css/mobile-landscape.css" rel="stylesheet">
    
    <!-- Header/Footer Styles -->
    <link rel="stylesheet" href="css/header-footer.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --atomic-cyan: #00FFFF;
            --tron-cyan: #00E5FF;
            --dark-cyan: #00BCD4;
            --electric-blue: #0080FF;
            --atomic-bg: #0A0A0F;
            --panel-bg: #141420;
            --grid-color: #00FFFF33;
            --text-cyan: #E0FFFF;
            --text-dim: #80C0C0;
            --glow-cyan: #00FFFF80;
            --atomic-orange: #FF6B35;
            --atomic-pink: #FF1B8D;
            --warning-yellow: #FFD700;
        }

        body {
            font-family: 'Exo 2', 'Orbitron', monospace;
            background: var(--atomic-bg);
            background-image: 
                radial-gradient(circle at 25% 25%, var(--grid-color) 1px, transparent 1px),
                radial-gradient(circle at 75% 75%, var(--grid-color) 1px, transparent 1px),
                linear-gradient(135deg, var(--atomic-bg) 0%, #0F0F1A 50%, var(--atomic-bg) 100%);
            background-size: 40px 40px, 40px 40px, 100% 100%;
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--text-cyan);
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    var(--grid-color) 2px,
                    var(--grid-color) 3px
                );
            pointer-events: none;
            z-index: 1;
            opacity: 0.3;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            min-height: 100vh;
            background: var(--panel-bg);
            background-image: 
                linear-gradient(135deg, var(--panel-bg) 0%, #1A1A2E 100%);
            box-shadow: 
                0 0 30px var(--glow-cyan),
                inset 0 0 30px rgba(0, 255, 255, 0.1),
                0 0 60px rgba(0, 255, 255, 0.2);
            border: 1px solid var(--atomic-cyan);
            position: relative;
            z-index: 2;
        }

        .app-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 20px,
                    var(--grid-color) 20px,
                    var(--grid-color) 21px
                );
            pointer-events: none;
            z-index: -1;
        }

        /* Hero Section */
        .hero-section {
            background: 
                linear-gradient(135deg, var(--atomic-cyan), var(--tron-cyan)),
                linear-gradient(45deg, transparent 30%, rgba(0, 255, 255, 0.1) 50%, transparent 70%);
            color: var(--atomic-bg);
            padding: 60px 20px 40px;
            text-align: center;
            position: relative;
            border-bottom: 2px solid var(--atomic-cyan);
            box-shadow: 
                0 4px 20px var(--glow-cyan),
                inset 0 -2px 0 rgba(255, 255, 255, 0.3);
            margin-top: 70px; /* Account for fixed header */
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 10px,
                    rgba(255, 255, 255, 0.1) 10px,
                    rgba(255, 255, 255, 0.1) 11px
                );
            pointer-events: none;
        }

        .robot-icon {
            font-size: 64px;
            margin-bottom: 15px;
            display: block;
            text-shadow: 
                0 0 10px var(--atomic-bg),
                0 0 20px var(--atomic-bg),
                0 0 30px var(--atomic-bg);
            filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.8));
            animation: atomicPulse 3s ease-in-out infinite;
        }

        @keyframes atomicPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .app-title {
            font-family: 'Orbitron', monospace;
            font-size: 36px;
            font-weight: 900;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 
                0 0 10px var(--atomic-bg),
                0 0 20px var(--atomic-bg);
        }

        .app-subtitle {
            font-family: 'Exo 2', sans-serif;
            font-size: 14px;
            font-weight: 300;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 5px var(--atomic-bg);
        }

        /* Navigation */
        .nav-container {
            padding: 30px 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .nav-card {
            background: 
                linear-gradient(135deg, var(--panel-bg), #1A1A30),
                radial-gradient(circle at center, rgba(0, 255, 255, 0.1), transparent);
            border: 2px solid var(--atomic-cyan);
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .nav-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--atomic-cyan), transparent);
            animation: scanLine 3s linear infinite;
        }

        @keyframes scanLine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .nav-card:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 10px 30px var(--glow-cyan),
                inset 0 0 30px rgba(0, 255, 255, 0.2);
            border-color: var(--tron-cyan);
        }

        .nav-card:hover::before {
            animation-duration: 1s;
        }

        .nav-icon {
            font-size: 48px;
            margin-bottom: 20px;
            display: block;
            text-align: center;
            filter: drop-shadow(0 0 10px var(--glow-cyan));
            animation: iconFloat 4s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .nav-title {
            font-family: 'Orbitron', monospace;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--atomic-cyan);
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 10px var(--glow-cyan);
            text-align: center;
        }

        .nav-description {
            font-family: 'Exo 2', sans-serif;
            font-size: 14px;
            color: var(--text-dim);
            line-height: 1.6;
            text-align: center;
            margin-bottom: 20px;
        }

        .nav-features {
            list-style: none;
            font-size: 12px;
            color: var(--text-cyan);
            font-family: 'Exo 2', monospace;
        }

        .nav-features li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .nav-features li::before {
            content: '▸';
            position: absolute;
            left: 0;
            color: var(--atomic-cyan);
            font-weight: bold;
        }

        /* Main content adjustments for fixed header/footer */
        .nav-container {
            padding-bottom: 80px; /* Account for fixed footer */
        }



        /* Responsive Design */
        @media (max-width: 768px) {
            .app-container {
                max-width: 100%;
                border-left: none;
                border-right: none;
            }
            
            .app-title {
                font-size: 32px;
                letter-spacing: 2px;
            }
            
            .app-subtitle {
                font-size: 14px;
                letter-spacing: 2px;
            }
            
            .nav-container {
                grid-template-columns: 1fr;
                padding: 20px 15px;
                gap: 20px;
            }
            
            .nav-card {
                padding: 25px 20px;
            }
            
            .nav-icon {
                font-size: 40px;
            }
            
            .nav-title {
                font-size: 20px;
                letter-spacing: 1px;
            }
            
            .robot-icon {
                font-size: 64px;
            }
            
            .header {
                padding: 30px 20px;
            }
        }

        @media (max-width: 480px) {
            .app-title {
                font-size: 28px;
            }
            
            .nav-icon {
                font-size: 36px;
            }
            
            .nav-title {
                font-size: 18px;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 10px;
                padding: 20px;
            }
        }

        /* Special navigation card colors */
        .nav-card.chat-card:hover {
            border-color: var(--atomic-pink);
            box-shadow: 
                0 10px 30px rgba(255, 27, 141, 0.5),
                inset 0 0 30px rgba(255, 27, 141, 0.2);
        }

        .nav-card.dashboard-card:hover {
            border-color: var(--electric-blue);
            box-shadow: 
                0 10px 30px rgba(0, 128, 255, 0.5),
                inset 0 0 30px rgba(0, 128, 255, 0.2);
        }

        .nav-card.camera-card:hover {
            border-color: var(--atomic-orange);
            box-shadow: 
                0 10px 30px rgba(255, 107, 53, 0.5),
                inset 0 0 30px rgba(255, 107, 53, 0.2);
        }

        .nav-card.map-card:hover {
            border-color: var(--dark-cyan);
        }

        .nav-card.stt-card:hover {
            border-color: #00ff00;
            box-shadow: 
                0 10px 30px rgba(0, 255, 0, 0.5),
                inset 0 0 30px rgba(0, 255, 0, 0.2);
        }

        .nav-card.llm-card:hover {
            border-color: #ff00ff;
            box-shadow: 
                0 10px 30px rgba(255, 0, 255, 0.5),
                inset 0 0 30px rgba(255, 0, 255, 0.2);
        }

        .nav-card.tts-card:hover {
            border-color: #ffff00;
            box-shadow: 
                0 10px 30px rgba(255, 255, 0, 0.5),
                inset 0 0 30px rgba(255, 255, 0, 0.2);
        }
            box-shadow: 
                0 10px 30px rgba(0, 188, 212, 0.5),
                inset 0 0 30px rgba(0, 188, 212, 0.2);
        }

        .nav-card.process-card:hover {
            border-color: var(--warning-yellow);
            box-shadow: 
                0 10px 30px rgba(255, 215, 0, 0.5),
                inset 0 0 30px rgba(255, 215, 0, 0.2);
        }

        .nav-card.internal-card:hover {
            border-color: var(--warning-yellow);
            box-shadow: 
                0 10px 30px rgba(255, 215, 0, 0.5),
                inset 0 0 30px rgba(255, 215, 0, 0.2);
        }

        .nav-card.cursor-card:hover {
            border-color: #007acc;
            box-shadow: 
                0 10px 30px rgba(0, 122, 204, 0.5),
                inset 0 0 30px rgba(0, 122, 204, 0.2);
        }

        .nav-card.github-card:hover {
            border-color: #238636;
            box-shadow: 
                0 10px 30px rgba(35, 134, 54, 0.5),
                inset 0 0 30px rgba(35, 134, 54, 0.2);
        }

        .nav-card.wifi-card:hover {
            border-color: var(--success-green);
            box-shadow: 
                0 10px 30px rgba(0, 255, 136, 0.5),
                inset 0 0 30px rgba(0, 255, 136, 0.2);
        }

        .nav-card.shell-card:hover {
            border-color: var(--warning-yellow);
            box-shadow: 
                0 10px 30px rgba(255, 215, 0, 0.5),
                inset 0 0 30px rgba(255, 215, 0, 0.2);
        }

        .nav-card.webble-card:hover {
            border-color: var(--electric-blue);
            box-shadow: 
                0 10px 30px rgba(0, 128, 255, 0.5),
                inset 0 0 30px rgba(0, 128, 255, 0.2);
        }

        .nav-card.services-card:hover {
            border-color: var(--atomic-orange);
            box-shadow: 
                0 10px 30px rgba(255, 165, 0, 0.5),
                inset 0 0 30px rgba(255, 165, 0, 0.2);
        }

        .nav-card.behavior-card:hover {
            border-color: #00FF00;
            box-shadow: 
                0 10px 30px rgba(0, 255, 0, 0.5),
                inset 0 0 30px rgba(0, 255, 0, 0.2);
        }

        .nav-card.voice-card:hover {
            border-color: var(--atomic-pink);
            box-shadow: 
                0 10px 30px rgba(255, 107, 192, 0.5),
                inset 0 0 30px rgba(255, 107, 192, 0.2);
        }

        .nav-card.llm-card:hover {
            border-color: var(--electric-blue);
            box-shadow: 
                0 10px 30px rgba(0, 128, 255, 0.5),
                inset 0 0 30px rgba(0, 128, 255, 0.2);
        }

        /* Install Banner */
        .install-banner {
            background: 
                linear-gradient(135deg, var(--atomic-orange), var(--atomic-pink));
            color: white;
            padding: 15px 20px;
            border: 2px solid var(--atomic-orange);
            margin: 20px;
            display: none;
            align-items: center;
            gap: 15px;
            font-size: 12px;
            font-family: 'Orbitron', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .install-banner.show {
            display: flex;
            animation: atomicGlow 2s ease-in-out infinite alternate;
        }

        @keyframes atomicGlow {
            from { box-shadow: 0 0 15px rgba(255, 107, 53, 0.5); }
            to { box-shadow: 0 0 25px rgba(255, 107, 53, 0.8); }
        }

        .install-button {
            background: white;
            color: var(--atomic-orange);
            border: none;
            padding: 8px 15px;
            font-family: 'Orbitron', monospace;
            font-size: 10px;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Loading State */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--atomic-bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid var(--grid-color);
            border-top: 3px solid var(--atomic-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--atomic-cyan);
            font-family: 'Orbitron', monospace;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .loading-subtext {
            color: var(--text-dim);
            font-family: 'Exo 2', sans-serif;
            font-size: 12px;
            text-align: center;
            max-width: 300px;
        }


    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Initializing LAIKA</div>
        <div class="loading-subtext">Loading system components...</div>
    </div>

    <div class="app-container">
        <!-- Hero Section -->
        <div class="hero-section">
            <span class="robot-icon">🐕</span>
            <h1 class="app-title">LAIKA</h1>
            <p class="app-subtitle">Atomic-Age Robot Companion</p>
        </div>

        <!-- Install Banner -->
        <div class="install-banner" id="installBanner">
            <span>📱</span>
            <span>Install LAIKA Controller for the best experience</span>
            <button class="install-button" id="installButton">Install</button>
        </div>

        <!-- Navigation Container -->
        <div class="nav-container">
                <!-- STT Test -->
                <a href="stt" class="nav-card stt-card">
                    <span class="nav-icon">🎤</span>
                    <h3 class="nav-title">STT Test</h3>
                    <p class="nav-description">
                        Interactive speech recognition testing with wake word detection and real-time audio visualization.
                    </p>
                    <ul class="nav-features">
                        <li>Wake word detection</li>
                        <li>Real-time recognition</li>
                        <li>Multiple STT providers</li>
                        <li>Audio visualization</li>
                    </ul>
                </a>

                <!-- LLM Test -->
                <a href="llm" class="nav-card llm-card">
                    <span class="nav-icon">🤖</span>
                    <h3 class="nav-title">LLM Test</h3>
                    <p class="nav-description">
                        Test LAIKA's language model with direct commands and robot action execution.
                    </p>
                    <ul class="nav-features">
                        <li>Direct LLM commands</li>
                        <li>Robot action testing</li>
                        <li>Conversation history</li>
                        <li>Response analysis</li>
                    </ul>
                </a>

                <!-- TTS Test -->
                <a href="tts" class="nav-card tts-card">
                    <span class="nav-icon">🗣️</span>
                    <h3 class="nav-title">TTS Test</h3>
                    <p class="nav-description">
                        Test text-to-speech with ElevenLabs Ekaterina voice and multiple TTS providers.
                    </p>
                    <ul class="nav-features">
                        <li>ElevenLabs Ekaterina</li>
                        <li>Multiple TTS engines</li>
                        <li>Voice testing</li>
                        <li>Audio playback</li>
                    </ul>
                </a>

                <!-- Chat Interface -->
                <a href="chat" class="nav-card chat-card" data-link="chat">
                    <span class="nav-icon">💬</span>
                    <h3 class="nav-title">Chat with LAIKA</h3>
                    <p class="nav-description">
                        Real-time conversation with LAIKA's AI brain. Natural language commands and contextual responses.
                    </p>
                    <ul class="nav-features">
                        <li>Voice-to-text input</li>
                        <li>LLM brain integration</li>
                        <li>Personality switching</li>
                        <li>Command execution</li>
                    </ul>
                </a>

                <!-- STT-LLM-TTS Pipeline -->
                <a href="stt-llm-tts" class="nav-card internal-card">
                    <span class="nav-icon">🧠</span>
                    <h3 class="nav-title">STT-LLM-TTS</h3>
                    <p class="nav-description">
                        Monitor STT-LLM-TTS pipeline, system logs, and send direct TTS commands to LAIKA.
                    </p>
                    <ul class="nav-features">
                        <li>Live pipeline monitoring</li>
                        <li>STT-LLM-TTS flow tracking</li>
                        <li>Direct TTS input</li>
                        <li>System diagnostics</li>
                    </ul>
                </a>



                <!-- Gamepad Interface -->
                <a href="gamepad" class="nav-card gamepad-card">
                    <span class="nav-icon">🎮</span>
                    <h3 class="nav-title">Gamepad Interface</h3>
                    <p class="nav-description">
                        Real-time gamepad visualization and monitoring. See physical gamepad button presses highlighted in real-time.
                    </p>
                    <ul class="nav-features">
                        <li>Live button highlighting</li>
                        <li>Connection status monitoring</li>
                        <li>Button activity log</li>
                        <li>Gamepad statistics</li>
                    </ul>
                </a>

                <!-- LLM Direct Commands -->
                <a href="llm" class="nav-card llm-card">
                    <span class="nav-icon">🤖</span>
                    <h3 class="nav-title">LLM Commands</h3>
                    <p class="nav-description">
                        Direct LLM command interface for robot actions. Execute sit, stand, wave, and other commands via REST API.
                    </p>
                    <ul class="nav-features">
                        <li>Direct robot action API</li>
                        <li>Instant command execution</li>
                        <li>/llm/sit, /llm/stand endpoints</li>
                        <li>Real-time action feedback</li>
                    </ul>
                </a>

                <!-- Sensor Dashboard -->
                <a href="dashboard" class="nav-card dashboard-card" data-link="dashboard">
                    <span class="nav-icon">📊</span>
                    <h3 class="nav-title">Sensor Dashboard</h3>
                    <p class="nav-description">
                        Live telemetry and system monitoring. Real-time data from all sensors and components.
                    </p>
                    <ul class="nav-features">
                        <li>Battery & power monitoring</li>
                        <li>Temperature sensors</li>
                        <li>IMU & servo health</li>
                        <li>Performance analytics</li>
                    </ul>
                </a>

                <!-- Camera View -->
                <a href="camera" class="nav-card camera-card" data-link="camera">
                    <span class="nav-icon">📹</span>
                    <h3 class="nav-title">Camera View</h3>
                    <p class="nav-description">
                        Live HD video stream with AI-powered scene analysis and object recognition.
                    </p>
                    <ul class="nav-features">
                        <li>Real-time HD streaming</li>
                        <li>AI scene analysis</li>
                        <li>Object detection</li>
                        <li>Photo capture</li>
                    </ul>
                </a>

                <!-- SLAM Map -->
                <a href="slam" class="nav-card map-card" data-link="slam">
                    <span class="nav-icon">🗺️</span>
                    <h3 class="nav-title">SLAM Map</h3>
                    <p class="nav-description">
                        Interactive 3D textured mapping and navigation. Real-time SLAM with camera textures and waypoint navigation.
                    </p>
                    <ul class="nav-features">
                        <li>3D textured visualization</li>
                        <li>Camera-LIDAR fusion</li>
                        <li>Click-to-navigate</li>
                        <li>Real-time mapping</li>
                    </ul>
                </a>

                <!-- WebBLE WiFi Setup -->
                <a href="webble" class="nav-card webble-card">
                    <span class="nav-icon">📶</span>
                    <h3 class="nav-title">WebBLE Setup</h3>
                    <p class="nav-description">
                        Configure LAIKA's WiFi credentials using Web Bluetooth. Connect directly to set up network access.
                    </p>
                    <ul class="nav-features">
                        <li>BLE Improv WiFi setup</li>
                        <li>Network scanning</li>
                        <li>Direct credential config</li>
                        <li>Connection status</li>
                    </ul>
                </a>

                <!-- Services Management -->
                <a href="services" class="nav-card services-card">
                    <span class="nav-icon">⚙️</span>
                    <h3 class="nav-title">Services</h3>
                    <p class="nav-description">
                        System service management and monitoring. Control and monitor LAIKA's core services.
                    </p>
                    <ul class="nav-features">
                        <li>Service status monitoring</li>
                        <li>Start/stop/restart services</li>
                        <li>Real-time updates</li>
                        <li>System diagnostics</li>
                    </ul>
                </a>

                <!-- Music Recognition -->
                <a href="music" class="nav-card">
                    <span class="nav-icon">🎵</span>
                    <h3 class="nav-title">Music & Audio</h3>
                    <p class="nav-description">
                        Real-time music recognition and audio analysis. Beat detection and music-responsive behaviors.
                    </p>
                    <ul class="nav-features">
                        <li>AudD music recognition</li>
                        <li>Beat detection</li>
                        <li>Audio spectrum</li>
                        <li>Music-sync dancing</li>
                    </ul>
                </a>

                <!-- Robot Control -->
                <a href="control" class="nav-card">
                    <span class="nav-icon">🎮</span>
                    <h3 class="nav-title">Robot Control</h3>
                    <p class="nav-description">
                        Direct robot control with gamepad interface and ROS2 integration. Emergency controls included.
                    </p>
                    <ul class="nav-features">
                        <li>Gamepad-style interface</li>
                        <li>ROS2 command integration</li>
                        <li>Bluetooth controller support</li>
                        <li>Emergency stop controls</li>
                    </ul>
                </a>

                <!-- 3D Model Viewer -->
                <a href="3d" class="nav-card">
                    <span class="nav-icon">🤖</span>
                    <h3 class="nav-title">3D Model Viewer</h3>
                    <p class="nav-description">
                        Interactive 3D visualization of the PuppyPi robot model with real-time joint states and ROS integration.
                    </p>
                    <ul class="nav-features">
                        <li>Interactive 3D model</li>
                        <li>Real-time joint states</li>
                        <li>ROSBridge integration</li>
                        <li>Demo animations</li>
                    </ul>
                </a>

                <!-- Behavior Tree Editor -->
                <a href="behavior" class="nav-card behavior-card">
                    <span class="nav-icon">🌳</span>
                    <h3 class="nav-title">Behavior Tree Editor</h3>
                    <p class="nav-description">
                        Visual behavior tree editor with Groot2 integration. Design and manage LAIKA's autonomous behaviors.
                    </p>
                    <ul class="nav-features">
                        <li>Visual tree editor</li>
                        <li>Groot2 integration</li>
                        <li>Real-time monitoring</li>
                        <li>Behavior testing</li>
                    </ul>
                </a>

                <!-- Process Monitor -->
                <a href="processes" class="nav-card process-card" data-link="processes">
                    <span class="nav-icon">🖥️</span>
                    <h3 class="nav-title">Process Monitor</h3>
                    <p class="nav-description">
                        Real-time system process monitoring like top command. View CPU, memory usage, and manage processes.
                    </p>
                    <ul class="nav-features">
                        <li>Live process monitoring</li>
                        <li>CPU & memory tracking</li>
                        <li>System stats dashboard</li>
                        <li>Process management</li>
                    </ul>
                </a>

                <!-- System Logs -->
                <a href="logs" class="nav-card">
                    <span class="nav-icon">📋</span>
                    <h3 class="nav-title">System Logs</h3>
                    <p class="nav-description">
                        Real-time system logs and diagnostics. Monitor ROS2 nodes, services, and system events.
                    </p>
                    <ul class="nav-features">
                        <li>Live log streaming</li>
                        <li>ROS2 node monitoring</li>
                        <li>Error tracking</li>
                        <li>System diagnostics</li>
                    </ul>
                </a>

                <!-- Cursor AI Assistant -->
                <a href="cursor" class="nav-card cursor-card">
                    <span class="nav-icon">🤖</span>
                    <h3 class="nav-title">Cursor AI Assistant</h3>
                    <p class="nav-description">
                        AI-powered coding assistant integrated with LAIKA development. Get help with code, debugging, and project development.
                    </p>
                    <ul class="nav-features">
                        <li>Code generation & debugging</li>
                        <li>LAIKA project assistance</li>
                        <li>Real-time chat interface</li>
                        <li>Development guidance</li>
                    </ul>
                </a>

                <!-- GitHub Repository Manager -->
                <a href="github" class="nav-card github-card">
                    <span class="nav-icon">🐙</span>
                    <h3 class="nav-title">GitHub Manager</h3>
                    <p class="nav-description">
                        Manage LAIKA repository updates recursively. Pull latest changes, update submodules, and keep the system current.
                    </p>
                    <ul class="nav-features">
                        <li>Recursive repo updates</li>
                        <li>Submodule synchronization</li>
                        <li>Branch management</li>
                        <li>Update status monitoring</li>
                    </ul>
                </a>

                <!-- WiFi Management -->
                <a href="wifi" class="nav-card wifi-card">
                    <span class="nav-icon">📡</span>
                    <h3 class="nav-title">WiFi Management</h3>
                    <p class="nav-description">
                        Manage WiFi connections and network configuration for LAIKA. Scan networks, connect to WiFi, and monitor connection status.
                    </p>
                    <ul class="nav-features">
                        <li>Network scanning & discovery</li>
                        <li>WiFi connection management</li>
                        <li>Connection status monitoring</li>
                        <li>Network diagnostics</li>
                    </ul>
                </a>

                <!-- Shell Terminal -->
                <a href="shell" class="nav-card shell-card">
                    <span class="nav-icon">💻</span>
                    <h3 class="nav-title">Shell Terminal</h3>
                    <p class="nav-description">
                        Interactive command-line interface for LAIKA system administration. Execute commands, monitor processes, and manage files.
                    </p>
                    <ul class="nav-features">
                        <li>Real-time command execution</li>
                        <li>Command history & suggestions</li>
                        <li>Process monitoring & control</li>
                        <li>File system navigation</li>
                    </ul>
                </a>
        </div>

        <!-- Header and Footer will be automatically inserted by header-footer.js -->
    </div>

    <!-- Scripts -->
    <script>
        // Global error handler
        window.addEventListener('error', function(e) {
            console.error('Global error caught:', e.error);
            // Show user-friendly error message
            showErrorToUser('An unexpected error occurred. The app will continue to function.');
            return true; // Prevent default error handling
        });

        // Unhandled promise rejection handler
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled promise rejection:', e.reason);
            showErrorToUser('A network or processing error occurred. Please try again.');
            e.preventDefault(); // Prevent default rejection handling
        });

        // Utility function to show errors to user
        function showErrorToUser(message) {
            try {
                // Try to find an error display element
                const errorElement = document.getElementById('errorMessage') || 
                                   document.getElementById('error-display') ||
                                   createErrorDisplay();
                
                if (errorElement) {
                    errorElement.textContent = message;
                    errorElement.style.display = 'block';
                    setTimeout(() => {
                        errorElement.style.display = 'none';
                    }, 5000);
                }
            } catch (err) {
                // Fallback to alert if DOM manipulation fails
                console.error('Could not show error in UI:', err);
            }
        }

        // Create error display element if none exists
        function createErrorDisplay() {
            try {
                const errorDiv = document.createElement('div');
                errorDiv.id = 'fallback-error-display';
                errorDiv.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #ff4444;
                    color: white;
                    padding: 10px 15px;
                    border-radius: 5px;
                    z-index: 10000;
                    max-width: 300px;
                    font-size: 14px;
                    display: none;
                `;
                document.body.appendChild(errorDiv);
                return errorDiv;
            } catch (err) {
                console.error('Could not create error display:', err);
                return null;
            }
        }

        // Hide loading overlay
        function hideLoading() {
            try {
                const loadingOverlay = document.getElementById('loadingOverlay');
                if (loadingOverlay) {
                    loadingOverlay.classList.add('hidden');
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 500);
                }
            } catch (err) {
                console.error('Error hiding loading overlay:', err);
            }
        }

        // Update loading text
        function updateLoadingText(text, subtext) {
            try {
                const textElement = document.querySelector('.loading-text');
                const subtextElement = document.querySelector('.loading-subtext');
                if (textElement) textElement.textContent = text;
                if (subtextElement) subtextElement.textContent = subtext;
            } catch (err) {
                console.error('Error updating loading text:', err);
            }
        }

        // Robust page initialization
        function initializePage() {
            try {
                console.log('Initializing LAIKA PWA...');
                updateLoadingText('Initializing LAIKA', 'Setting up core systems...');

                // Update time with error handling
                function updateTime() {
                    try {
                        const now = new Date();
                        const timeString = now.toLocaleTimeString('en-US', { 
                            hour12: false, 
                            hour: '2-digit', 
                            minute: '2-digit' 
                        });
                        const timeElement = document.getElementById('currentTime');
                        if (timeElement) {
                            timeElement.textContent = timeString;
                        }
                    } catch (err) {
                        console.error('Error updating time:', err);
                        // Continue without time updates if this fails
                    }
                }
                
                updateTime();
                setInterval(updateTime, 1000);
                updateLoadingText('Initializing LAIKA', 'Setting up PWA features...');

                // PWA Install Banner with error handling
                try {
                    let deferredPrompt;
                    const installBanner = document.getElementById('installBanner');
                    const installButton = document.getElementById('installButton');

                    if (installBanner && installButton) {
                        window.addEventListener('beforeinstallprompt', (e) => {
                            try {
                                e.preventDefault();
                                deferredPrompt = e;
                                installBanner.classList.add('show');
                            } catch (err) {
                                console.error('Error handling install prompt:', err);
                            }
                        });

                        installButton.addEventListener('click', async () => {
                            try {
                                if (deferredPrompt) {
                                    deferredPrompt.prompt();
                                    const { outcome } = await deferredPrompt.userChoice;
                                    console.log(`User response to the install prompt: ${outcome}`);
                                    deferredPrompt = null;
                                    installBanner.classList.remove('show');
                                }
                            } catch (err) {
                                console.error('Error during PWA install:', err);
                                showErrorToUser('Installation failed. Please try again.');
                            }
                        });

                        window.addEventListener('appinstalled', () => {
                            try {
                                console.log('LAIKA PWA was installed');
                                installBanner.classList.remove('show');
                            } catch (err) {
                                console.error('Error handling app install event:', err);
                            }
                        });
                    }
                } catch (err) {
                    console.error('Error setting up PWA install:', err);
                    // Continue without PWA install functionality
                }

                updateLoadingText('LAIKA Ready', 'Initialization complete!');
                console.log('LAIKA PWA initialized successfully');
                
                // Hide loading after a short delay
                setTimeout(hideLoading, 800);

            } catch (err) {
                console.error('Critical error during page initialization:', err);
                updateLoadingText('Initialization Error', 'Some features may not work properly');
                showErrorToUser('App initialization encountered issues. Some features may not work properly.');
                setTimeout(hideLoading, 2000);
            }
        }

        // Robust service worker registration
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                try {
                    navigator.serviceWorker.register('sw.js')
                        .then(registration => {
                            console.log('SW registered successfully:', registration);
                        })
                        .catch(registrationError => {
                            console.error('SW registration failed:', registrationError);
                            // App will still work without service worker
                        });
                } catch (err) {
                    console.error('Error registering service worker:', err);
                    // Continue without service worker
                }
            }
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializePage);
        } else {
            // DOM is already loaded
            initializePage();
        }

        // Register service worker when page loads
        if (document.readyState === 'complete') {
            registerServiceWorker();
        } else {
            window.addEventListener('load', registerServiceWorker);
        }
    </script>
    
    <!-- Header/Footer System with error handling -->
    <script>
        // Load header-footer.js with fallback
        (function() {
            try {
                const script = document.createElement('script');
                script.src = 'js/header-footer.js';
                script.onerror = function() {
                    console.warn('Header-footer.js failed to load - continuing without it');
                };
                document.head.appendChild(script);
            } catch (err) {
                console.error('Error loading header-footer script:', err);
            }
        })();
    </script>
    
    <!-- Main App Script with error handling -->
    <script>
        // Load main app script with fallback
        (function() {
            try {
                const script = document.createElement('script');
                script.src = 'js/app.js';
                script.onerror = function() {
                    console.error('Main app script failed to load');
                    showErrorToUser('Core functionality failed to load. Please refresh the page.');
                    
                    // Provide basic fallback functionality
                    const cards = document.querySelectorAll('.nav-card');
                    cards.forEach(card => {
                        const link = card.getAttribute('data-link');
                        if (link) {
                            card.addEventListener('click', () => {
                                window.location.href = link;
                            });
                        }
                    });
                };
                document.head.appendChild(script);
            } catch (err) {
                console.error('Error loading main app script:', err);
                showErrorToUser('Failed to load main application. Please refresh the page.');
            }
        })();
    </script>
    
    <!-- Gamepad Navigation System -->
    <!-- <script src="js/gamepad-navigation.js"></script> -->
</body>
</html>